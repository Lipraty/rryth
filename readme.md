# [koishi-plugin-rryth](https://github.com/MirrorCY/rryth)

[![downloads](https://img.shields.io/npm/dm/koishi-plugin-rryth?style=flat-square)](https://www.npmjs.com/package/koishi-plugin-rryth)


### 2.2.0 版本发布，解除 75 词限制，新增默认参数设置，取消单次批量出图避免服务器队列被长时间占用，更新接口。
### 2.1.0 版本发布，不再依赖大家装不上的 sharp；不再依赖大家连不上的 stablehorde；同时解决了以下问题，后续会完全重写，期待更新。
- 关键词限制
- 关键词长度限制
- 封ip
- 不稳定
- 出图灰蒙蒙
- 出图时间长

本插件基于 [novelai-bot](https://github.com/koishijs/novelai-bot) 修改完成，暂时使用 sdapi 进行 AI 图片生成。已实现功能：

- 绘制图片/批量绘制图片
- 自动超分辨率
- 更改图片尺寸
- 高级请求语法
- 翻译中文关键词
- 设置并自动过滤违禁词
- 发送一段时间后自动撤回

得益于 Koishi 的插件化机制，只需配合其他插件即可实现更多功能：

- 多平台支持 (QQ、Discord、Telegram、开黑啦等)
- 速率限制 (限制每个用户每天可以调用的次数和每次调用的间隔)
- 上下文管理 (限制在哪些群聊中哪些用户可以访问)

**所以所以快去给 [Koishi](https://github.com/koishijs/koishi) 点个 star 吧！**

## 使用教程

- 安装并启用插件，开箱即用，无需任何配置
- 在沙盒里输入 `sai` 即可看到此插件的帮助啦

有任何问题都可以提 issue 我会尽快回复~

没有 Github 账号的小伙伴可以来群里找我 @42

![QR](https://simx.elchapo.cn/NovelAI.png)


## TODO

主服务器

- 部落筛选请求并发给指定的部落桥
- 非荣誉机制（不再有任何歧视）
- 像素数排序，小图优先（优先完成多数人的需求）
- 请求频率限制（简陋的防攻击方法）

服务端

- 通过插件接入主服务器（解决安装问题）
- 选择自己可接受的最大像素量（针对不同显卡）
- 设定多久获取一次任务（自由选择你想提供多大支持）
- 获取 sdapi 可用模型并报送部落（无需下载即可画各种模型的图）

客户端

- 子命令获取并设置用户默认参数（每个人想要的默认参数都不一样，不要每次输入）
- 需要解决的问题（1.0 存在的问题 2.0 都要解决）
  - 关键词限制
  - 关键词长度限制
  - 封ip
  - 不稳定
  - 出图灰蒙蒙
  - 出图时间长

部落图床

- 收集展示图片（计划提供展示平台）
- 降低风控风险（转移封锁风险至部落）

控制台页面

- 画图（在控制台画画！）
- 查看部落状态（怎么又不出图了？）
- 排行榜（今天我又帮多少网友画涩图了？）
- 设置客户端
- 设置服务端

翻译服务器

- 避免用户自行申请 api （一天用完的 api 有什么存在的必要吗？）
- 模型翻译 效果可能不怎么好（loli => floor（逃）

鉴黄服务器

- 尽可能避免炸群

